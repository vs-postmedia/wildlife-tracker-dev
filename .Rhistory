# geom_bar(stat = 'identity') +
geom_line() +
theme_minimal() +
theme(legend.position = 'top')+
labs(title = 'Encounters by year')
# BY MUNI/YEAR
by_year %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
y = n,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
View(bear_data)
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
y = n,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
color = species_name,
fill = species_name
)) +
geom_coo(stat = 'identity') +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
color = species_name,
fill = species_name
)) +
geom_coo() +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
color = species_name,
fill = species_name
)) +
geom_col() +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
y = count(year),
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
ggplot(aes(
x = year,
y = count(year),
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
# facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# METRO by attractant
metro_attr <- bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, attractant_names) %>%
summarize(
total = n()
) %>%
mutate(
pct = total/sum(total) * 100
) %>%
filter(
attractant_names != 'NOT APPLICABLE'
) %>%
arrange(-total)
# BY MUNI/YEAR
metro_attr %>%
ggplot(aes(
x = year,
y = count(year),
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
# facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
head(metro_attr)
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, species_name) %>%
summarize(
total = n()
) %>%
mutate(
pct = total/sum(total) * 100
) %>%
filter(
attractant_names != 'NOT APPLICABLE'
) %>%
ggplot(aes(
x = year,
y = n,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
# facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, species_name) %>%
summarize(
total = n()
) %>%
mutate(
pct = total/sum(total) * 100
) %>%
ggplot(aes(
x = year,
y = n,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
# facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, species_name) %>%
summarize(
total = n()
) %>%
mutate(
pct = total/sum(total) * 100
) %>%
head()
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, year, species_name) %>%
summarize(
total = n()
) %>%
mutate(
pct = total/sum(total) * 100
) %>%
head()
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, year, species_name) %>%
summarize(
total = n()
) %>%
mutate(
pct = total/sum(total) * 100
) %>%
head(n=10)
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, year, species_name) %>%
summarize(
total = n()
) %>%
ggplot(aes(
x = year,
y = total,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
# facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, year, species_name) %>%
summarize(
total = n()
) %>%
ggplot(aes(
x = year,
y = total,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
# BY MUNI/YEAR
bear_data %>%
filter(
tolower(encounter_locality) %in% metro_van
) %>%
group_by(encounter_locality, year, attractant_names, species_name) %>%
summarize(
total = n()
) %>%
filter(
attractant_names == 'GARBAGE'
) %>%
ggplot(aes(
x = year,
y = total,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
facet_wrap(~encounter_locality) +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
library(ggmap)
# setup Google API key (w/ sanity check)
api = "AIzaSyBF-15yhpfXVwqu3VXQ2DA-DO-kTpC6hs8"
register_google(key = api)
ggmap_credentials()
gg <- get_googlemap(
center = c('49.246885', '-122.926256'),
maptype = 'terrain',
scale = 2,
zoom = 10
)
?get_googlemap
gg <- get_googlemap(
center = c(49.246885, -122.926256),
maptype = 'terrain',
scale = 2,
zoom = 10
)
gg <- get_googlemap(
center = c(-122.926256, 49.246885),
maptype = 'terrain',
scale = 2,
zoom = 10
)
gg + stat_density2d(
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30, data = bear_data,
geom = "polygon"
) +
# BY YEAR
by_year %>%
ggplot(aes(
x = year,
y = n,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
?stat_density2d
gg + stat_density2d(
aes(x = encounter_lng, y = encounter_lat, alpha = 0.25),
size = 0.01, bins = 30, data = bear_data,
geom = "polygon"
) +
# BY YEAR
by_year %>%
ggplot(aes(
x = year,
y = n,
color = species_name,
fill = species_name
)) +
geom_bar(stat = 'identity') +
# geom_line() +
theme_minimal() +
theme(legend.position = 'top') +
labs(title = 'Encounters by year')
gg + stat_density2d(
aes(x = encounter_lng, y = encounter_lat, alpha = 0.25),
size = 0.01, bins = 30, data = bear_data,
geom = 'polygon'
)
gg <- get_googlemap(
center = c(-122.926256, 49.246885),
maptype = 'terrain',
scale = 2,
zoom = 10
)
gg
gg + stat_density2d(
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30, data = bear_data,
geom = 'polygon'
)
get_googlemap(
center = c(-122.926256, 49.246885),
maptype = 'terrain',
scale = 2,
zoom = 10
) + stat_density2d(
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30, data = bear_data,
geom = 'polygon'
)
gg + stat_density2d(aes(x = encounter_lng, y = encounter_lat), data = bear_data)
gg + stat_density2d(data = bear_data)
gg + geom_point() + stat_density2d(data = bear_data)
gg + geom_point(aes(x = encounter_lng, y = encounter_lat), data = bear_data)
gg + geom_point(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat)
)
ggplot() +
geom_point(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat)
)
gg <- get_googlemap(
center = c(-122.926256, 49.246885),
maptype = 'terrain'
# scale = 2,
# zoom = 10
)
# ggplot() +
gg +
geom_point(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat)
)
# ggplot() +
gg() +
geom_point(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat)
)
# ggplot() +
gg +
geom_point(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25)
)
ggplot() +
# gg +
geom_point(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25)
)
ggplot() +
# gg +
stat_density2d(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25)
)
ggplot() +
# gg +
stat_density2d(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25)
) +
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution") +
NULL
ggplot() +
# gg +
stat_density2d(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30,
geom = "polygon"
) +
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution") +
NULL
# ggplot() +
gg +
stat_density2d(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30,
geom = "polygon"
) +
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution") +
NULL
# ggplot() +
gg +
stat_density2d(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
# aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
aes(x = year, y = attractant_ids, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30,
geom = "polygon"
) +
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution") +
NULL
glimpse(bear_data)
filter(bear_data, tolower(encounter_locality) %in% metro_van) %>% glimpse()
# ggplot() +
gg +
stat_density2d(
data = filter(bear_data, tolower(encounter_locality) %in% metro_van),
# aes(x = encounter_lng, y = encounter_lat, fill = ..level.., alpha = 0.25),
aes(x = year, y = encounter_enctype_id, fill = ..level.., alpha = 0.25),
size = 0.01, bins = 30,
geom = "polygon"
) +
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution") +
NULL
